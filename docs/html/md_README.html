<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Research track module I - second assignment: Research Track I - second assignment</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Research track module I - second assignment
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Research Track I - second assignment </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this second assignment, we were asked to develop a software architecture for controlling a robot within a specific environment. More in details, our software will rely on two different packages:</p>
<ol type="1">
<li>the move_base pakage</li>
<li>the gmapping package</li>
</ol>
<p>The first one, will take care of the localization of our robot within the enviroment, whereas the second one will plan the motion.</p>
<h2>User request</h2>
<p>The architecture will provide a way to get the <b>user request</b>, and will make the robot capable of executing one of the following behaviors (depending on the user’s input):</p>
<ol type="1">
<li>Move randomly in the environment, by choosing 1 out of 6 possible target position <table class="doxtable">
<tr>
<th>Position </th><th>Coordinates  </th></tr>
<tr>
<td>Position 1 </td><td>(-4,-3) </td></tr>
<tr>
<td>Position 2 </td><td>(-4,2) </td></tr>
<tr>
<td>Position 3 </td><td>(-4,7) </td></tr>
<tr>
<td>Position 4 </td><td>(5,-7) </td></tr>
<tr>
<td>Position 5 </td><td>(5,-3) </td></tr>
<tr>
<td>Position 6 </td><td>(5,1) </td></tr>
</table>
</li>
<li>Directly ask the user for the <b>next</b> target position (checking that the position is one of the possible six) and reach it)</li>
<li>Start following the external walls</li>
<li>Stop in the last position</li>
<li>(optional) change the planning algorithm to <em>dijkstra</em> (move_base) to the <code>bug0</code></li>
</ol>
<h1>How the architecture is structured</h1>
<p>Please, find in the following sections a brief summary of the various ROS messages, services, parameters, and other sub-structures used to realise this project</p>
<h2>Messages</h2>
<h3>Published messages</h3>
<p>In the list below, the <b>published messages</b> of the whole architecture are reported:</p>
<ul>
<li><code>actionlib_msgs/GoalID</code>: It publishes the messages to the **/move_base/cancel** topic in order to remove a target as it is considered reached. Indeed, it allows to easily avoid the inadvertent overlying of robot <em>distinct</em> behaviours</li>
<li><code>geometry_msgs/Twist</code>: It publishes the messages to the **/cmd_vel** topic. Moreover, it is used:<ol type="1">
<li>for setting both the robot linear and and angular velocity</li>
<li>for halting the robot.</li>
</ol>
</li>
<li><code>move_base_msgs/MoveBaseActionGoal</code>: It publishes the messages to the **/move_base/goal** topic. Moreover, it is used for setting the move_base goal that the robot has to achieve</li>
</ul>
<h3>Subscribed messages</h3>
<p>In the list below, the <b>subscribed messages</b> of the whole architecture are reported:</p>
<ul>
<li><code>geometry_msgs/Point</code>: It defines the robot position, expressed as a <b>Point</b></li>
<li><code>nav_msgs/Odometry</code>: It provides the current robot position by means of the **/Odom** topic</li>
<li><code>sensor_msgs/LaserScanl</code> It provides the real-time laser output through the **/scan** topic</li>
</ul>
<h2>Services</h2>
<p>As far as services are concerned, I have here-reported a quick explanation of their purposes:</p>
<ol type="1">
<li>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts/random_srv.py">random_srv.py</a> script, there is the <code>/random_srv</code> service. Its purpose is to choose between six different coordinate positions</li>
<li>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts/go_to_point_service_m.py">go_to_point_service_m.py</a> script, there is the <code>/go_to_point_switch</code> service. Its purpose is to <em>activate/deactivate</em> the <b>go-to-point</b> behaviour</li>
<li>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts/ui.py">ui.py</a> script, we find the <code>/ui</code> service. its purpose consists in providing a tool for selecting one out of the <b>five</b> possible robot states. In the table below, it is possible to spot what, the different states implement:</li>
</ol>
<table class="doxtable">
<tr>
<th>_state_ </th><th><em>Coordinates</em>  </th></tr>
<tr>
<td>**state 1** </td><td>move randomly </td></tr>
<tr>
<td>**state 2** </td><td>target position </td></tr>
<tr>
<td>**state 3** </td><td>walls following </td></tr>
<tr>
<td>**state 4** </td><td>stop </td></tr>
<tr>
<td>**state 5** </td><td>bug algorithm </td></tr>
</table>
<blockquote class="doxtable">
<p><em>REMARK:</em> When <code>state 5</code> is chosen, I have implemented a <em>20 secs timer</em> which allows the user to exit from <em>bug algorithm</em> if the target is not yet reached (then it is assumed to be not reachable). Once the time has expired, the user has the possibility to re-enter in <b>state 5</b> and pick up another new target by means of a user-interface. </p>
</blockquote>
<ol type="1">
<li>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts/user_interface.py">user_interface.py</a> script, we find the <code>/user_interface service</code>. Its purpose basically consists in providing a tool for selecting the <em>x,y coordinates</em> of the next desired robot target position, once the previous target has been reached. Moreover, this is the <em>user-interface</em> exploited by the <b>bug algorithm</b></li>
<li>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts/wall_follower_service_m.py">wall_follower_service_m.py</a> script, we find the <code>/wall_follower_switch</code> service. Its purpose is to <em>activate/deactivate</em> the <b>wall-follower</b> behaviour</li>
<li>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts/wall_follower_bug.py">wall_follower_bug.py</a> script, we find the <code>/wall_follower_bug</code> service. Its purpose is to <em>activate/deactivate</em> the <b>wall-follower</b> behaviour. <blockquote class="doxtable">
<p><em>REMARK:</em> This is the service exploited by the <code>bug algorithm</code>! </p>
</blockquote>
</li>
<li>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts/bug_m.py">bug_m.py</a> script, we find the <code>/bug_alg</code> service. Its purpose is to <em>activate/deactivate</em> the <b>bug algorithm</b> behaviour (through a boolean value)</li>
</ol>
<h2>Nodes</h2>
<p>Within the <a href="https://github.com/fedehub/final_assignment/tree/main/scripts">scripts</a> folder, the following nodes are available:</p>
<ol type="1">
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/master_node.py">master_node.py</a> It implements the structure of the entire architecture. It handles the simulation structure and it provides a way for checking the robot state. Then, it triggers the required service.</li>
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/user_interface.py">user_interface.py</a> As its name suggests, It provides a service, exploited by the <b>bug algorithm</b>,for letting the user choose which <b>target position</b> the robot should achieve.</li>
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/ui.py">ui.py</a> It provides a user-interface in which the user has to select 1 out of 5 available states. Then, once inserted the chosen state, a "valid state" <b>message</b> appears, so that the user can save his/her choice by typing the string "done" <blockquote class="doxtable">
<p><em>REMARK:</em> When entering the "done" string or other strings, remember to add the quote marks "" </p>
</blockquote>
</li>
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/wall_follower_bug.py">wall_follower_bug.py</a> It provides a service for avoiding the collision between our robot and the neighboring walls while performing the target achievement <blockquote class="doxtable">
<p><em>REMARK:</em> We need to distinguish between <em><a class="el" href="wall__follower__bug_8py.html">wall_follower_bug.py</a></em> and <em><a class="el" href="wall__follower__service__m_8py.html">wall_follower_service_m.py</a></em> because even if they share the same code structure, when calling the latter service, both 'bug algorithm' and its <em><a class="el" href="namespacewall__follower__service__m.html" title="Documentation for the wall_follower_service_m.py module. ">wall_follower_service_m</a></em> are disabled! </p>
</blockquote>
</li>
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/wall_follower_service_m.py">wall_follower_service_m.py</a> As its name suggests, it provides a service for simulating the wall following behaviour</li>
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/go_to_point_service_m.py">go_to_point_service_m.py</a> It provides a service for making the <b>bug algorithm*** capable of implementing the **go-to-point</b> behaviour</li>
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/random_srv.py">random_srv.py</a> It provides a straightforward service, for setting a <b>random position</b> which the robot will achieve</li>
<li><a href="https://github.com/fedehub/final_assignment/tree/main/scripts/bug_m.py">bug_m.py</a> It provides a service for carrying out the <b>bug algorithm</b> behaviour</li>
</ol>
<h2>Parameters</h2>
<p>They are contained in the <a href="https://github.com/fedehub/final_assignment/tree/main/launch">launch</a> folder. More specifically:</p>
<ul>
<li>Within the <a href="https://github.com/fedehub/final_assignment/blob/main/launch/node_master.launch">node_master.launch</a> file, I have initialised:<ul>
<li><code>des_pos_x</code> and <code>des_pos_y</code> for allocating the <em>x,y coordinates</em> of the target the user has chosen (so that the robot can reach them)</li>
<li><code>state</code> for individuating the current state (between <em>1 and 5</em>) of the robot</li>
<li><code>change_state</code> for initialising at <em>zero</em> the current state of our robot. It has been proven very useful during the implementation of the <b>bug algorithm</b></li>
</ul>
</li>
</ul>
<h2>Rqt-graph (ROS tool)</h2>
<p>By running the following command:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;rosrun rqt_graph rqt_graph</div></div><!-- fragment --><p> it is possible to show a dynamic graph, depicting what is going on within the System.</p>
<div class="image">
<img src="https://github.com/fedehub/final_assignment/blob/main/rqt_graph/rosgraph2.png"  alt="rqt_graph" title="Rqt_graph second assignment"/>
</div>
<h1>How to launch</h1>
<ol type="1">
<li>Firstly, create a folder named _"final_assignment"_</li>
<li>Within the aforementioned folder, open the terminal and run:</li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git clone https://github.com/fedehub/final_assignment/</div></div><!-- fragment --><ol type="1">
<li>Then, to launch the <em>3D visualizer Rviz</em> and the <em>3D simulator Gazebo</em> please run the command <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;roslaunch final_assignment simulation_gmapping.launch</div></div><!-- fragment --></li>
<li>To launch the <em>move_base.launch</em>, digit:</li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;roslaunch final_assignment move_base.launch</div></div><!-- fragment --><ol type="1">
<li>To conclude with, digit:</li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;roslaunch final_assignment node_master.launch</div></div><!-- fragment --><h2>Documentation</h2>
<p>The documentation of this project, obtained by means of <b>DoxyGen</b> is visible, within the <a href="https://github.com/fedehub/final_assignment/tree/main/docs">docs</a> folder</p>
<h2>System limitation's and possible Improvements</h2>
<p>The <code>state 1</code> behaviour can be implemented so that the move_base should be capable of publishing continuously random position without blocking.</p>
<h2>Release History</h2>
<ul>
<li><code>0.1.0</code><ul>
<li>The first proper release</li>
</ul>
</li>
<li><code>0.0.1</code><ul>
<li>Work in progress</li>
</ul>
</li>
</ul>
<h2>Meta</h2>
<p>Federico Civetta– s4194543 – <a href="#" onclick="location.href='mai'+'lto:'+'fed'+'eu'+'niv'+'er'+'s@g'+'ma'+'il.'+'co'+'m'; return false;">fedeu<span style="display: none;">.nosp@m.</span>nive<span style="display: none;">.nosp@m.</span>rs@gm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a></p>
<p>Distributed under none licence</p>
<p><a href="https://github.com/fedehub">https://github.com/fedehub</a></p>
<h2>Contributing</h2>
<ol type="1">
<li>Fork it (<a href="https://github.com/fedehub/final_assignment/fork">https://github.com/fedehub/final_assignment/fork</a>)</li>
<li>Create your feature branch (<code>git checkout -b feature/fooBar</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some fooBar'</code>)</li>
<li>Push to the branch (<code>git push origin feature/fooBar</code>)</li>
<li>Create a new Pull Request </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
